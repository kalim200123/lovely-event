<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our 2nd Anniversary</title>
    
    <!-- Meta Tags for KakaoTalk/Sharing -->
    <meta property="og:title" content="â¤ï¸ ìš°ë¦¬ì˜ 2ì£¼ë…„ â¤ï¸">
    <meta property="og:description" content="730ì¼ì˜ ì¶”ì–µì„ ì´ê³³ì— ë‹´ì•˜ì–´. ì‚¬ë‘í•´!">
    <meta property="og:image" content="./img/thumb.jpg">

    <!-- í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" href="https://toss.im/assets/img/og-icon.png"> <!-- Temporary heart-like icon if user doesn't have one, or simple emoji -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>â¤ï¸</text></svg>">
    
    <!-- ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://unpkg.com/typeit@8.7.1/dist/index.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* ğŸ¨ Color Palette */
        :root {
            --bg-color: #fff0f5; 
            --primary-color: #ffb7b2; 
            --secondary-color: #ffdac1; 
            --text-main: #4a4a4a;
            --text-sub: #888888;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(255, 183, 178, 0.3);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background: linear-gradient(to bottom, #fff0f5, #fffdf9);
            color: var(--text-main);
            font-family: 'Pretendard', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ğŸŒ¸ Intro & Login Screen */
        #intro-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #fff0f5 0%, #ffdac1 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
            overflow: hidden; /* ë²šê½ƒ ë„˜ì¹¨ ë°©ì§€ */
        }

        /* ğŸŒ¸ ë²šê½ƒì ìŠ¤íƒ€ì¼ */
        .petal {
            position: absolute;
            background-color: #ffc0cb;
            border-radius: 150% 0 150% 0;
            width: 15px; height: 15px;
            opacity: 0.8;
            z-index: 1000;
            pointer-events: none;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% { top: -10%; transform: translateX(0) rotate(0deg); opacity: 1; }
            100% { top: 110%; transform: translateX(100px) rotate(360deg); opacity: 0; }
        }

        .login-card {
            background: rgba(255, 255, 255, 0.25); /* ë°˜íˆ¬ëª… */
            backdrop-filter: blur(10px); /* ìœ ë¦¬ íš¨ê³¼ */
            padding: 3rem 2rem;
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            text-align: center;
            max-width: 90%;
            width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.5); /* í…Œë‘ë¦¬ë„ ì€ì€í•˜ê²Œ */
            z-index: 2000; /* ë²šê½ƒë³´ë‹¤ ìœ„ì— */
        }

        .hand-font {
            font-family: 'Nanum Pen Script', cursive;
            font-size: 2.5rem;
            color: #ff8fa3;
            margin-bottom: 20px;
        }

        .login-input {
            background: #f9f9f9;
            border: 2px solid #eee;
            border-radius: 50px;
            padding: 15px;
            font-size: 1.2rem;
            text-align: center;
            width: 100%;
            margin-top: 15px;
            outline: none;
            transition: all 0.3s;
            font-family: 'Pretendard', sans-serif;
        }

        .login-input:focus {
            border-color: var(--primary-color);
            background: #fff;
            box-shadow: 0 0 15px rgba(255, 183, 178, 0.3);
        }

        /* ğŸ“– Main Layout */
        #main-app {
            max-width: 800px;
            margin: 0 auto;
            display: none;
            padding-bottom: 100px;
            opacity: 0;
            animation: fadeInPage 1s forwards;
        }

        @keyframes fadeInPage { to { opacity: 1; } }

        .header { text-align: center; padding: 80px 20px 40px; }
        .main-title { font-family: 'Nanum Pen Script', cursive; font-size: 4rem; color: var(--text-main); margin-bottom: 10px; }
        .sub-title { color: var(--text-sub); font-size: 1rem; letter-spacing: 2px; }

        /* â³ Timeline Style */
        .timeline-container { position: relative; padding: 40px 20px; }
        .timeline-container::before {
            content: ''; position: absolute; left: 50%; top: 0; bottom: 0; width: 2px;
            background: #ffdac1; transform: translateX(-50%);
        }

        .timeline-item {
            position: relative; margin-bottom: 60px; width: 100%;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; transform: translateY(30px); transition: all 0.6s ease;
        }
        .timeline-item.visible { opacity: 1; transform: translateY(0); }

        .date-badge {
            position: absolute; left: 50%; transform: translateX(-50%);
            background: #fff; border: 2px solid var(--primary-color);
            color: var(--primary-color); padding: 5px 15px; border-radius: 20px;
            font-weight: bold; font-size: 0.9rem; z-index: 2;
        }

        .memory-card {
            background: var(--white); width: 45%; border-radius: 15px; overflow: hidden;
            box-shadow: var(--shadow); cursor: pointer; transition: transform 0.3s;
            position: relative;
        }
        
        .timeline-item:nth-child(odd) { justify-content: flex-start; }
        .timeline-item:nth-child(even) { justify-content: flex-end; }
        .timeline-item:nth-child(odd) .memory-card { margin-left: auto; margin-right: 50px; }
        .timeline-item:nth-child(even) .memory-card { margin-left: 50px; margin-right: auto; }
        .memory-card:hover { transform: translateY(-10px); }

        .card-img-holder { width: 100%; height: auto; background-color: #eee; overflow: hidden; position: relative; }
        .card-img { width: 100%; height: auto; display: block; transition: transform 0.5s; }
        .memory-card:hover .card-img { transform: scale(1.1); }
        
        /* ì•¨ë²” ì•„ì´ì½˜ ì¶”ê°€ (ì—¬ëŸ¬ì¥ì„ì„ í‘œì‹œ) */
        .multiple-icon {
            position: absolute; top: 10px; right: 10px;
            background: rgba(0,0,0,0.5); color: white;
            padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;
        }

        .card-body { padding: 20px; text-align: center; }
        .card-title { font-size: 1.2rem; font-weight: bold; margin-bottom: 5px; color: #555; }
        .card-desc { font-size: 0.9rem; color: #888; }
        .click-hint { font-size: 0.8rem; color: var(--primary-color); margin-top: 10px; display: block; }

        /* ğŸ’Œ Letter Section */
        .letter-section {
            margin-top: 60px; padding: 60px 30px; background: #fff;
            border-radius: 20px; box-shadow: var(--shadow);
            position: relative; text-align: center; margin-bottom: 60px;
        }

        .letter-paper {
            background-image: linear-gradient(#f1f1f1 1px, transparent 1px);
            background-size: 100% 2rem; line-height: 2rem; padding: 20px;
            text-align: left; font-family: 'Nanum Pen Script', cursive;
            font-size: 1.8rem; color: #555; min-height: 300px;
        }

        .final-btn {
            background: var(--primary-color); color: white; border: none;
            padding: 15px 40px; border-radius: 30px; font-size: 1.2rem;
            margin-top: 30px; cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 183, 178, 0.4);
            transition: transform 0.2s; display: none;
        }
        .final-btn:hover { transform: scale(1.05); }

        /* ğŸŒŸ Final Section */
        .final-section {
            display: none; text-align: center; margin-top: 50px; animation: slideUp 1s ease;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .final-card-wrapper { max-width: 500px; margin: 0 auto; transform: scale(1.05); }
        .final-message {
            font-family: 'Nanum Pen Script', cursive; font-size: 2.5rem;
            color: var(--primary-color); margin-top: 20px; margin-bottom: 40px;
        }

        /* ğŸ–¼ï¸ Carousel Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px);
            z-index: 10000; display: none; justify-content: center; align-items: center;
            padding: 20px; opacity: 0; transition: opacity 0.3s;
        }

        .modal-content {
            background: white; padding: 10px; border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15); max-width: 600px; width: 100%;
            text-align: center; transform: scale(0.9); transition: transform 0.3s;
        }
        
        .modal-inner {
            border: 2px dashed var(--secondary-color); padding: 20px; border-radius: 15px;
            position: relative;
        }

        /* Carousel Styles */
        .carousel-container {
            position: relative;
            width: 100%;
            height: 80vh; 
            background: #f8f8f8;
            border-radius: 10px;
            overflow: hidden; /* ìŠ¤í¬ë¡¤ ë¶ˆí•„ìš” ì‹œ hidden, í•„ìš” ì‹œ auto */
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .carousel-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* ì§¤ë¦¬ì§€ ì•Šê³  ë‹¤ ë³´ì´ê²Œ ì„¤ì • */
            display: none; 
            animation: fadeImg 0.5s ease;
        }
        .carousel-img.active { display: block; }
        
        @keyframes fadeImg { from { opacity: 0.5; } to { opacity: 1; } }

        .nav-btn {
            position: absolute;
            top: 50%; transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.8);
            border: none; border-radius: 50%;
            width: 40px; height: 40px;
            font-size: 1.2rem; color: var(--primary-color);
            cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10;
        }
        .nav-btn:hover { background: white; color: #ff8fa3; }
        .prev-btn { left: 10px; }
        .next-btn { right: 10px; }

        .img-counter {
            position: absolute; bottom: 10px; right: 10px;
            background: rgba(0,0,0,0.6); color: white;
            padding: 3px 10px; border-radius: 10px; font-size: 0.8rem;
        }

        .modal-text h3 { color: var(--primary-color); font-family: 'Nanum Pen Script', cursive; font-size: 2rem; margin-bottom: 10px; }
        .modal-text p { color: #666; line-height: 1.6; word-break: keep-all; }

        .close-btn {
            position: absolute; top: 15px; right: 15px;
            background: none; border: none; font-size: 2rem;
            cursor: pointer; color: #aaa; z-index: 20;
        }

        /* ğŸ“± Mobile Responsive */
        @media (max-width: 768px) {
            .timeline-container::before { left: 20px; }
            .timeline-item { flex-direction: column; align-items: flex-start; margin-left: 20px; }
            .timeline-item:nth-child(odd), .timeline-item:nth-child(even) { justify-content: flex-start; }
            .date-badge { left: 0; transform: translateX(-50%); }
            .memory-card { width: calc(100% - 40px); margin-left: 30px !important; margin-right: 0 !important; }
            .main-title { font-size: 3rem; }
            .final-card-wrapper { width: 90%; }
        }
    </style>
</head>
<body>

    <!-- 1. Intro & Login -->
    <div id="intro-screen">
        <div class="login-card">
            <i class="fas fa-heart" style="color: #ffb7b2; font-size: 3rem; margin-bottom: 20px; animation: heartbeat 1.5s infinite;"></i>
            <h1 class="hand-font" id="intro-title"></h1>
            <p style="color: #4a4a4a; font-size: 1rem; font-weight: bold;">ìš°ë¦¬ê°€ ì²˜ìŒ ì‚¬ë‘ì„ ì‹œì‘í•œ ë‚ ì€?</p>
            <input type="tel" class="login-input" id="login-date" placeholder="" maxlength="8">
        </div>
    </div>

    <!-- 2. Main Content -->
    <div id="main-app">
        <header class="header">
            <h1 class="main-title">Our 2nd Anniversary</h1>
            <p class="sub-title">2024.01.18 ~ ING â¤ï¸</p>
        </header>

        <!-- Timeline -->
        <div class="timeline-container" id="timeline-box">
            <!-- JSë¡œ ì•„ì´í…œë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>

        <!-- Letter Section -->
        <div class="letter-section">
            <i class="fas fa-envelope-open-text" style="color: var(--primary-color); font-size: 2rem; margin-bottom: 20px;"></i>
            <h2 class="hand-font" style="margin-bottom: 20px;">To. ì‚¬ë‘í•˜ëŠ” ë„ˆì—ê²Œ</h2>
            <div class="letter-paper" id="typewriter-area"></div>
            <button class="final-btn" id="promise-btn">Forever with you â¤ï¸</button>
        </div>

        <!-- Final Memory Section -->
        <div class="final-section" id="final-section">
            <div class="final-card-wrapper">
                <div class="memory-card" style="width: 100%; margin: 0; cursor: default;">
                    <div class="card-img-holder">
                        <img id="final-img" src="" class="card-img" alt="final-memory">
                    </div>
                    <div class="card-body">
                        <div class="card-title" id="final-title"></div>
                        <div class="card-desc" id="final-desc"></div>
                    </div>
                </div>
            </div>
            <div class="final-message">
                ê³„ì†í•´ì„œ ì´ë ‡ê²Œ ë” ì˜ˆì˜ê²Œ ì‚¬ë‘í•˜ì ğŸ’•
            </div>
        </div>
    </div>

    <!-- 3. Carousel Modal -->
    <div class="modal-overlay" id="modal" onclick="closeModal(event)">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal(event)">&times;</button>
            <div class="modal-inner">
                
                <!-- ìŠ¬ë¼ì´ë“œ ì˜ì—­ -->
                <div class="carousel-container">
                    <button class="nav-btn prev-btn" onclick="changeSlide(-1)">&#10094;</button>
                    <div id="carousel-imgs">
                        <!-- JSë¡œ ì´ë¯¸ì§€ë“¤ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                    </div>
                    <button class="nav-btn next-btn" onclick="changeSlide(1)">&#10095;</button>
                    <div class="img-counter" id="img-counter">1 / 1</div>
                </div>

                <div class="modal-text">
                    <h3 id="modal-title">ì œëª©</h3>
                    <p id="modal-desc">ë‚´ìš©</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ============================================================
           âš™ï¸ ìˆ˜ì •í•  ë¶€ë¶„: ë¡œì»¬ í´ë” êµ¬ì¡°ì— ë§ì¶°ì„œ ê²½ë¡œë¥¼ ë³€ê²½í–ˆìŠµë‹ˆë‹¤!
           img í´ë”ë¥¼ ë§Œë“¤ê³  ì‚¬ì§„ì„ ë„£ì–´ì£¼ì„¸ìš”.
           ============================================================ */
        const CONFIG = {
            startDate: "20240118", 
            ogImage: "./img/thumb.jpg", 
            
            memories: [
                { 
                    date: "2024.01.18", 
                    title: "ì„¤ë ˆëŠ” ì²« ì‹œì‘", 
                    images: [
                        "./img/01_start/1.jpg",
                        "./img/01_start/2.jpg",
                        "./img/01_start/3.jpg",
                        "./img/01_start/4.jpg",
                        "./img/01_start/5.jpg"
                    ], 
                    desc: "ì²˜ìŒ ë§Œë‚¬ì„ ë•Œ ê¸°ì–µë‚˜? ë„ˆë‘ í•¨ê»˜í•œ ì‹œì‘ì´ ë„ˆë¬´ë‚˜ ì†Œì¤‘í•˜ë‹¤ ã…ã…â¤ï¸<br>ì˜í•˜ 17ë„ì—ë„ ì„œë¡œê°€ ì¢‹ì•„ì„œ ì§‘ ê°€ê¸° ì‹«ì—ˆë˜ ê·¸ë‚ , ì²« ë°ì´íŠ¸ ë‚ , ë³´ê³  ì‹¶ë‹¤ëŠ” ë§ì— ë°”ë¡œ ë§Œë‚œ ë‚ ë“¤ì„ ë‹´ì•„ë´¤ì–´!" 
                },
                { 
                    date: "2024.04.01", 
                    title: "ìš°ë¦¬ì˜ ë²šê½ƒ ë°ì´íŠ¸", 
                    images: [ 
                        "./img/02_cherry/1.jpg",
                        "./img/02_cherry/2.jpg",
                        "./img/02_cherry/3.jpg",
                        "./img/02_cherry/4.jpg"
                    ],
                    desc: "ë‚´ í‰ìƒì˜ ê¸°ì–µì— ë‚¨ì„ ì²« ë²šê½ƒë†€ì´ì•¼! ë²šê½ƒì´ í•„ ë•Œë§ˆë‹¤ ë‚˜ë‘ í•¨ê»˜ ê°€ì!ğŸŒ¸<br>ìš°ë¦¬ ì‹œë°€ëŸ¬ë£©ë„ ëŒ€ë•… ì´ì˜ë‹¤ ã…ã…ã…" 
                },
                { 
                    date: "2024.04.26",
                    title: "ìš°ë¦¬ 100ì¼ ê¸°ë…", 
                    images: [
                        "./img/03_100days/1.jpg",
                        "./img/03_100days/2.jpg",
                        "./img/03_100days/3.jpg",
                        "./img/03_100days/4.jpg"
                    ],
                    desc: "ì²˜ìŒìœ¼ë¡œ ê½ƒë“¤ê³  ë„ˆë¥¼ ë§Œë‚˜ëŸ¬ ê°„ ë‚ ! ìš°ë¦¬ì˜ 100ì¼ì„ ì¶•í•˜í•˜ë©°ğŸ‡<br>+ê½ƒ ì‚¬ëŸ¬ ê°€ì„œ ì€ë¹ˆì´ê°€ ë­˜ ë°›ìœ¼ë©´ ì¢‹ì„ê¹Œ ê³ ë¯¼ 10ë¶„ í–ˆë‹¤ã…ã…(10ë¶„ì´ë©´ ì—„ì²­ ê¸´ ì‹œê°„ì´ì•¼.. ã…‹ã…‹ã…‹)" 
                },
                { 
                    date: "2024.11.08",
                    title: "ê°€ì„ í™”ë‹´ìˆ² ë‹¨í’ ì—¬í–‰", 
                    images: [
                        "./img/04_autumn/1.jpg",
                        "./img/04_autumn/2.jpg",
                        "./img/04_autumn/3.jpg",
                        "./img/04_autumn/4.jpg",
                        "./img/04_autumn/5.jpg",
                    ],
                    desc: "ì¹´ë©”ë¼ë¡œ ë„ ë‹´ì€ ë‚ ! ë‹¨í’ì´ ì•ˆ ë³´ì´ê³  ë„ˆë§Œ ë³´ì¸ë‹¤ ğŸ¤­ğŸ’•<br>ë‹¤ìŒì—” ìš°ë¦¬ ì°¨íƒ€ê³  ìŠìŠì´ë¡œ ê°€ì!ğŸš—" 
                },
                { 
                    date: "2025.01.18", 
                    title: "ë²Œì¨ 1ì£¼ë…„", 
                    images: [
                        "./img/05_1st/1.jpg",
                        "./img/05_1st/2.jpg",
                        "./img/05_1st/3.jpg",
                        "./img/05_1st/4.jpg"
                    ],
                    desc: "1ë…„ ë™ì•ˆ ë„ˆë‘ í•¨ê»˜ í•œ ì‹œê°„ì´ ë„ˆë¬´ ì†Œì¤‘í•´â¤ï¸<br>í•­ìƒ ì›ƒìœ¼ë©´ì„œ ë‚´ ì˜†ì— ìˆì–´ì¤˜ì„œ ê³ ë§ˆì›Œ ì€ë¹ˆì•„ğŸ˜Š" 
                },
                { 
                    date: "2025.11.09",
                    title: "ì œì£¼ë„ ì—¬í–‰", 
                    images: [
                        "./img/06_jeju/1.jpg",
                        "./img/06_jeju/2.jpg",
                        "./img/06_jeju/3.jpg",
                        "./img/06_jeju/4.jpg",
                        "./img/06_jeju/5.jpg",
                    ],
                    desc: "ëª¨ë“  ê²Œ ì™„ë²½í–ˆë˜ ìš°ë¦¬ì˜ ì œì£¼!ğŸï¸<br>í‘ë¼ì§€, ë”±ìƒˆìš°, ë°©ì–´... ì´ ëª¨ë“  ê±¸ ë„ˆë‘í•´ì„œ ì •ë§ í–‰ë³µí–ˆì–´ğŸ¥°" 
                },
                { 
                    date: "forever",
                    title: "ë¯¿ìŒê³¼ ì‚¬ë‘", 
                    images: [
                        "./img/07_love/1.jpg",
                        "./img/07_love/2.jpg",
                        "./img/07_love/3.jpg",
                        "./img/07_love/4.jpg",
                    ],
                    desc: "ìš°ë¦¬ê°€ ìŒ“ì•„ì˜¨ ì‹ ë¢°ë§Œí¼ ë” ê¹Šì–´ì§„ ìš°ë¦¬ì˜ ì‚¬ë‘ì„ ë‹´ì•„ë´¤ì–´!<br>ì–¸ì œë‚˜ ë„ˆì˜ ì˜†ì—ì„œ í•¨ê»˜ í• ê²Œ ì€ë¹ˆì•„!â¤ï¸" 
                }
            ],

            // ë§ˆì§€ë§‰ í•˜ì´ë¼ì´íŠ¸ (ë‹¨ì¼ ì´ë¯¸ì§€)
            finalMemory: {
                title: "ìš°ë¦¬ì˜ 2ì£¼ë…„",
                img: "./img/final/1.jpg", // í´ë”ëª…: final
                desc: "ì‚¬ë‘í•´ ì€ë¹ˆì•„ğŸ¥°. ìš°ë¦¬ì˜ ë‚´ì¼ë“¤ë„ í•¨ê»˜ í•˜ìâ¤ï¸"
            },

            // í¸ì§€ ë‚´ìš©
            letter: `
ì‚¬ë‘í•˜ëŠ” ì€ë¹ˆì•„!!<br><br>

ì•™ë…•ì´! ìš°ë¦¬ê°€ ë§Œë‚œ ì§€ ë²Œì¨ 2ë…„ì´ë¼ë‹ˆ.. ì§„ì§œ ëŒ€ë•…ì´ë‹¤..<br>
ì‹œê°„ì´ ì§„ì§œ ìˆœì‹ê°„ì— ì§€ë‚˜ê°€ëŠ” ê±° ê°™ì•„!<br><br>

ì§€ë‚œ 2ë…„ ë™ì•ˆ ê¸°ìœ ì¼ë„, ê°€ë”ì€ í˜ë“  ì¼ë„ ìˆì—ˆì§€ë§Œ<br>
ë„¤ê°€ ê³ì— ìˆì–´ì¤˜ì„œ ëª¨ë“  ìˆœê°„ì´ ì˜ë¯¸ ìˆì—ˆì–´.<br><br>

ë‚´ê°€ í‘œí˜„ì´ ì¢€ ì„œíˆ´ê³ , GPTë³´ë‹¤ ëª»í•  ë•Œë„ ë§ì§€ë§Œ!(ã…‹ã…‹ã…‹)<br>
ë‚´ ë§ˆìŒì† 1ìˆœìœ„ëŠ” ì–¸ì œë‚˜ ë„ˆì•¼ ì€ë¹ˆì•„<br><br>

ì–¸ì œë‚˜ ë‚˜ë¥¼ ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ëˆˆìœ¼ë¡œ ë°”ë¼ë´ì¤˜ì„œ ë„ˆë¬´ ê³ ë§™ê³  ì‚¬ë‘í•´â¤ï¸<br>
ì•ìœ¼ë¡œ ìš°ë¦¬ê°€ í•¨ê»˜í•  ë‚ ë“¤ì´ ì •ë§ ë„ˆë¬´ ê¸°ëŒ€ëœë‹¤!<br><br>

ìš°ë¦¬ ì£¼ë‹˜ ì•ˆì—ì„œ ì„œë¡œë¥¼ ë” ë§ì´ ì•„ê»´ì£¼ê³ , ë” ë§ì´ ì‚¬ë‘í•˜ë©´ì„œ,<br>
ì•„ë¦„ë‹µê³  ë¹›ë‚  ìš°ë¦¬ì˜ ë‚´ì¼ì„ ê°™ì´ ê·¸ë ¤ë‚˜ê°€ì!<br><br>

2ì£¼ë…„ ì •ë§ ì¶•í•˜í•˜ê³ , ë„ˆë¬´ë„ˆë¬´ ì‚¬ë‘í•´ â¤ï¸<br><br>
- ë„ˆì˜ ë‚¨ìì¹œêµ¬ ë™ë¹µì´ê°€ -
            `
        };


        /* ============================================================
           ğŸš€ ë¡œì§ êµ¬í˜„
           ============================================================ */
        
        // 0-1. Floating Hearts Animation
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('floating-heart');
            heart.innerHTML = 'â¤ï¸';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 3 + 4 + 's'; 
            heart.style.opacity = Math.random() * 0.5 + 0.1;
            heart.style.fontSize = Math.random() * 20 + 10 + 'px';
            document.body.appendChild(heart);
            setTimeout(() => { heart.remove(); }, 6000);
        }
        setInterval(createHeart, 800);

        // 0-2. ğŸŒ¸ ë²šê½ƒ ë‚´ë¦¬ëŠ” íš¨ê³¼
        function createPetals() {
            const container = document.getElementById('intro-screen');
            for(let i=0; i<30; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = Math.random() * 5 + 5 + 's'; // 5~10ì´ˆ
                petal.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(petal);
            }
        }
        createPetals();

        // 0-3. âœ¨ ì¸íŠ¸ë¡œ íƒ€ì´í•‘ íš¨ê³¼
        new TypeIt("#intro-title", {
            strings: ["Our 2nd Anniversary"],
            speed: 100,
            waitUntilVisible: true,
            cursor: false
        }).go();

        // 1. ë¡œê·¸ì¸
        const loginInput = document.getElementById('login-date');
        loginInput.addEventListener('keyup', (e) => {
            if (loginInput.value === CONFIG.startDate) {
                document.getElementById('intro-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('intro-screen').style.display = 'none';
                    document.getElementById('main-app').style.display = 'block';
                    initTimeline(); 
                    window.addEventListener('scroll', checkScroll);
                    checkScroll();
                }, 1000);
            } else if (loginInput.value.length === 8) {
                loginInput.style.borderColor = '#ff6b6b';
                loginInput.classList.add('animate__animated', 'animate__shakeX');
                setTimeout(() => loginInput.style.borderColor = '#eee', 1000);
            }
        });

        // 2. íƒ€ì„ë¼ì¸ ìƒì„±
        function initTimeline() {
            const container = document.getElementById('timeline-box');
            CONFIG.memories.forEach((mem, index) => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                
                // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ëŒ€í‘œ ì‚¬ì§„ìœ¼ë¡œ ì‚¬ìš© (mem.images[0])
                const thumb = mem.images && mem.images.length > 0 ? mem.images[0] : "";
                const count = mem.images ? mem.images.length : 0;

                item.innerHTML = `
                    <div class="date-badge">${mem.date}</div>
                    <div class="memory-card" onclick="openModal(${index})">
                        <div class="card-img-holder">
                            <img src="${thumb}" class="card-img" alt="memory" onerror="this.src='https://placehold.co/600x400/ffb7b2/white?text=No+Image';">
                            ${count > 1 ? '<span class="multiple-icon"><i class="fas fa-images"></i> +'+(count-1)+'</span>' : ''}
                        </div>
                        <div class="card-body">
                            <div class="card-title">${mem.title}</div>
                            <span class="click-hint">Click to see more <i class="fas fa-search-plus"></i></span>
                        </div>
                    </div>
                `;
                container.appendChild(item);
            });
            
            // ë§ˆì§€ë§‰ ì‚¬ì§„ (ì—ëŸ¬ ì‹œ í”Œë ˆì´ìŠ¤í™€ë” í‘œì‹œ)
            const finalImg = document.getElementById('final-img');
            finalImg.src = CONFIG.finalMemory.img;
            finalImg.onerror = function() { this.src = 'https://placehold.co/600x400/ffb7b2/white?text=No+Image'; };
            
            document.getElementById('final-title').innerText = CONFIG.finalMemory.title;
            document.getElementById('final-desc').innerText = CONFIG.finalMemory.desc;
        }

        // 3. ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜
        function checkScroll() {
            const items = document.querySelectorAll('.timeline-item');
            const letterSec = document.querySelector('.letter-section');
            const triggerBottom = window.innerHeight * 0.8;

            items.forEach(item => {
                const top = item.getBoundingClientRect().top;
                if(top < triggerBottom) item.classList.add('visible');
            });

            const letterTop = letterSec.getBoundingClientRect().top;
            if(letterTop < triggerBottom && !window.letterStarted) {
                window.letterStarted = true;
                startTyping();
            }
        }

        // 4. ëª¨ë‹¬ & Carousel ê¸°ëŠ¥
        let currentImgIdx = 0;
        let currentMemIdx = 0;

        function openModal(index) {
            currentMemIdx = index;
            currentImgIdx = 0; // í•­ìƒ ì²«ë²ˆì§¸ ì‚¬ì§„ë¶€í„° ì‹œì‘
            
            const data = CONFIG.memories[index];
            const overlay = document.getElementById('modal');
            
            // í…ìŠ¤íŠ¸ ì„¤ì •
            document.getElementById('modal-title').innerText = data.title;
            document.getElementById('modal-desc').innerHTML = data.desc;

            // ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” ìƒì„±
            const imgContainer = document.getElementById('carousel-imgs');
            imgContainer.innerHTML = ''; // ì´ˆê¸°í™”
            
            if(data.images && data.images.length > 0) {
                data.images.forEach((src, i) => {
                    const img = document.createElement('img');
                    img.src = src;
                    img.className = i === 0 ? 'carousel-img active' : 'carousel-img';
                    // ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ í”Œë ˆì´ìŠ¤í™€ë”
                    img.onerror = function() { this.src = 'https://placehold.co/600x400/ffb7b2/white?text=No+Image'; };
                    imgContainer.appendChild(img);
                });
                updateCounter();
            }

            overlay.style.display = 'flex';
            setTimeout(() => {
                overlay.style.opacity = '1';
                document.querySelector('.modal-content').style.transform = 'scale(1)';
            }, 10);
        }

        function changeSlide(direction) {
            const data = CONFIG.memories[currentMemIdx];
            const images = document.querySelectorAll('.carousel-img');
            
            if (!images.length) return;

            // í˜„ì¬ ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
            images[currentImgIdx].classList.remove('active');

            // ì¸ë±ìŠ¤ ê³„ì‚°
            currentImgIdx += direction;
            if (currentImgIdx < 0) currentImgIdx = images.length - 1;
            if (currentImgIdx >= images.length) currentImgIdx = 0;

            // ìƒˆ ì´ë¯¸ì§€ ë³´ì´ê¸°
            images[currentImgIdx].classList.add('active');
            updateCounter();
        }

        function updateCounter() {
            const data = CONFIG.memories[currentMemIdx];
            const total = data.images.length;
            document.getElementById('img-counter').innerText = (currentImgIdx + 1) + " / " + total;
        }

        function closeModal(e) {
            if(e.target === document.getElementById('modal') || e.target.classList.contains('close-btn')) {
                const overlay = document.getElementById('modal');
                overlay.style.opacity = '0';
                document.querySelector('.modal-content').style.transform = 'scale(0.9)';
                setTimeout(() => overlay.style.display = 'none', 300);
            }
        }

        // 5. í¸ì§€ íƒ€ì´í•‘
        function startTyping() {
            new TypeIt("#typewriter-area", {
                strings: CONFIG.letter,
                speed: 50,
                html: true,
                afterComplete: () => {
                    document.getElementById('promise-btn').style.display = 'inline-block';
                }
            }).go();
        }

        // 6. ì—”ë”©
        document.getElementById('promise-btn').addEventListener('click', () => {
            var duration = 5 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti({ ...defaults, particleCount, origin: { x: Math.random(), y: Math.random() - 0.2 } });
            }, 250);

            const finalSection = document.getElementById('final-section');
            finalSection.style.display = 'block';
            setTimeout(() => {
                finalSection.scrollIntoView({ behavior: 'smooth' });
            }, 500);

            Swal.fire({
                title: 'â¤ï¸ì‚¬ë‘í•´â¤ï¸',
                text: 'ìš°ë¦¬ ë¿¡ìŠ¤ë¹µìŠ¤ì˜ 2ë…„ì„ ì¶•í•˜í•˜ë©°ğŸ¥³',
                icon: 'success',
                confirmButtonColor: '#ffb7b2'
            });
        });

        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
            .floating-heart {
                position: fixed; top: 100%; z-index: 100;
                animation: floatUp ease-in forwards; pointer-events: none;
            }
            @keyframes floatUp {
                0% { top: 100%; transform: translateX(0); }
                100% { top: -10%; transform: translateX(20px); }
            }
        `;
        document.head.appendChild(style);

    </script>
</body>
</html>